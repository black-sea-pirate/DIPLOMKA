<!--  -------------------------------------------------------------------------
      src/components/Charts/BarChart.vue

      Обёртка для столбиковой диаграммы (Bar Chart).
      Используем официальный пакет  **vue-chartjs**  (v4 для Vue 3).
      В родительском компоненте (Teacher/Analytics.vue) нам будет
      достаточно передать два пропса:
        • labels —  ['Algebra','Geometry',…]   — подписи X-оси
        • data   —  [80,55,70,…]               — сами значения
      --------------------------------------------------------------------- -->

<script setup>
/* ----------------------------------------------------------------------------
 * 1) <Bar> — компонент-обёртка из node_modules/vue-chartjs
 * 2) Подключаем *наш* файл  src/components/Charts/register.js
 *    ► именно там регистрируются модули Chart.js (CategoryScale, BarElement…)
 *      чтобы Chart.js понимал, какие элементы и скейлы ему доступны.
 *    ► Файл register.js остаётся неизменным после появления бекенда, потому
 *      что отвечает только за визуализацию.
 * ------------------------------------------------------------------------- */
import { Bar } from "vue-chartjs";
import "../../components/Charts/register";

/* ----------------------------------------------------------------------------
 * Декларация входных параметров:
 *   labels — массив строк для оси X
 *   data   — массив чисел для высоты столбцов
 * Типы указаны как Array (можно расширить до более строгих, если потребуется).
 * ------------------------------------------------------------------------- */
defineProps({
  labels: Array,
  data: Array,
});
</script>

<template>
  <!-- ------------------------------------------------------------------
       <Bar> ожидает объект :data в формате Chart.js:
         { labels: [...], datasets: [...] }
       У нас один набор данных (datasets[0]):
         label       — подпись в легенде
         data        — сами числа
         borderWidth — толщина обводки столбиков
     ------------------------------------------------------------------ -->
  <Bar
    :data="{
      labels,
      datasets: [{ label: 'Coverage', data, borderWidth: 1 }],
    }"
    :options="{
      responsive: true /* график растягивается под контейнер  */,
      maintainAspectRatio: false /* высота контролируем стилем ниже     */,
    }"
  />
</template>

<style scoped>
/* Ограничиваем высоту <canvas>.
   :deep(canvas) — «пробивает» scoped-границу, чтобы правило применилось
   к реальному элементу внутри компонента BarChart. */
:deep(canvas) {
  max-height: 280px;
}
</style>

<!-- ⚠️ Этот компонент — финальный: при подключении бекенда менять ничего
     не нужно. Только родитель (Analytics.vue) начнёт передавать реальные
     labels / data, пришедшие с сервера. -->
